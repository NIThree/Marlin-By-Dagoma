Set FILAMENTCHANGE_FINALRETRACT -950

Enable FILAMENT_RUNOUT_SENSOR
Set FIL_RUNOUT_INVERTING true
# D29 is A2 : Button PIN
Set FILAMENT_RUNOUT_SCRIPT '"M600 P29"'
# D30 is A1 : Sensor PIN
Pin FILRUNOUT_PIN 30

Set SUMMON_PRINT_PAUSE
Pin SUMMON_PRINT_PAUSE_PIN 29
Set SUMMON_PRINT_PAUSE_INVERTING false
# D29 is A2 : Button PIN
Set SUMMON_PRINT_PAUSE_SCRIPT '"M600 L0 P29"'

# To support a FINAL_RETRACT longer than 400 (200+200)
Disable PREVENT_LENGTHY_EXTRUDE