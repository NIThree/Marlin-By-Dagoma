# D65 is A11
# D19 is Z+
# Sensor PIN : D19

Enable FILAMENT_RUNOUT_SENSOR
Pin FILRUNOUT_PIN 19

Set FIL_RUNOUT_INVERTING true
Set FILAMENTCHANGE_FIRSTRETRACT -4.5
Set FILAMENTCHANGE_FINALRETRACT -950
Set FILAMENTCHANGE_FEEDRATE_MULTIPLICATOR 5

# D66 is A12
# D18 is Z-
# Button PIN : D18

# For testing purposes, L0 can be temporarily added to avoid using final retract value (we need to find a way to remove melted filament before final retract)
Set FILAMENT_RUNOUT_SCRIPT '"M600 P18"'

Enable SUMMON_PRINT_PAUSE
Pin SUMMON_PRINT_PAUSE_PIN 18
# D66 is A12 : Button PIN
Set SUMMON_PRINT_PAUSE_SCRIPT '"M600 L0 P18"'
Set SUMMON_PRINT_PAUSE_INVERTING false

# To support a FINAL_RETRACT longer than 400 (200+200)
Disable PREVENT_LENGTHY_EXTRUDE
